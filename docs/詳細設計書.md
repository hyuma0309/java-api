##  詳細

### 概要
 
 1日1回商品APIのログを出力し、そのログを集計しデータベースに保存します。 ログ検索画面からデータベースに保存したログを検索することが可能です。
 全体的な流れは下記の画像を参考にして下さい。
 
 
![log画像](image/Log.png)
 
 
###手順

 README.mdに記載のとおりにアプリケーションを起動し、以下の手順を行うことでlogを扱うことができます。
 
  1. | URL | HTTPメソッド    | API名 |
     | :--- | :---: | ---: |
     | /api/products | POST | 商品登録API |
     | /api/products?title=value	  | GET | 商品複数件取得API |
     | /api/products/{商品ID}  | GET | 商品取得API |
     | /api/products/{商品ID}  | PUT | 商品変更API |
     | /api/products/{商品ID}  | DELETE | 商品削除API |
     | /api/products/{商品ID}/images   | PATCH | 商品画像更新API |
     | /api/products/{商品ID}/images/{商品画像パス}.{拡張子}    | GET | 商品画像削除API |
     
  上記のURLにアクセスすることでログが出力され、tsvファイルに保存します。
  <br> この時、「2020-05-10.tsv」のようなファイル名で保存されます。
      
  ログが出力する内容
                  
  + 「URL(/api/products/xxx)」
  + 「HTTPメソッド」 
  + 「HTTPステータスコード」
  + 「APIの実行にかかった時間」
  + 「集計日」
      
   2. 1日1回午前1時ごとにTVSファイルの中身がデータベースに保存されます。
   <br> tsvファイル内のURLがおかしいなどデータに不備が存在しエラーとなった場合には、その行の処理をスキップし、次の行の処理に移動します。
   <br> 
   <br> データベースに保存される内容
   + 「API名」
   + 「HTTPメソッド」 
   + 「HTTPステータスコード」
   + 「APIのアクセス回数」
   + 「APIの実行にかかった時間」
   + 「集計日」
      
   3. URL  |  内容
        ---- | ----
         /api-log	  |  APIログ集計検索画面
         /api-log/search	  |  APIログ集計検索実行

   
   上記のURLにアクセスし、開始日と終了日を入力することでデータベースに保存したログを取得し、画面に出力します。
     
     
     
 
 
